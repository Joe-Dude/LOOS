<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Browser.lol Embed Popup</title>
</head>
<body>
<button id="openEmbed">Open Browser.lol Embed</button>

<script>
function openEmbedInRealPage(embedUrl, width = 1024, height = 768) {
    const newWin = window.open('', '_blank', `width=${width},height=${height}`);

    if (!newWin) {
        alert('Popup blocked: allow popups for this site.');
        return;
    }

    // Remove clipboard permission entirely to block access requests
    const html = `<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<meta name='referrer' content='no-referrer-when-downgrade'>
<title>Browser.lol Embed</title>
<style>
html, body { height: 100%; margin: 0; }
#iframeWrapper { width: 100%; height: 100%; position: relative; }
#iframeWrapper iframe { width: 100%; height: 100%; border: 0; display: block; }
#loading { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-family: sans-serif; background: white; z-index: 10; }
</style>
</head>
<body>
<div id='iframeWrapper'>
<div id='loading'>Loadingâ€¦</div>
<iframe id='frame'
    src='${embedUrl}'
    allow='geolocation; microphone; camera; autoplay; encrypted-media; fullscreen'
    referrerpolicy='no-referrer-when-downgrade'
    title='Browser.lol Embed'></iframe>
</div>
<script>
(function() {
    // Prevent iframe content from requesting clipboard permissions
    if (navigator.permissions) {
        navigator.permissions.query = () => Promise.resolve({ state: 'denied' });
    }
    const frame = document.getElementById('frame');
    frame.addEventListener('load', function() {
        const loading = document.getElementById('loading');
        if (loading) loading.remove();
    });
})();
</script>
</body>
</html>`;

    newWin.document.open();
    newWin.document.write(html);
    newWin.document.close();
}

// Button click listener
const btn = document.getElementById('openEmbed');
if (btn) {
    btn.addEventListener('click', function() {
        openEmbedInRealPage('https://browser.lol');
    });
}
</script>

</body>
</html>
